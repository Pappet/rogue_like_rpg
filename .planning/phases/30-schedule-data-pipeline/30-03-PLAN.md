---
phase: 30-schedule-data-pipeline
plan: 03
type: execute
wave: 3
depends_on: [30-01, 30-02]
files_modified: [tests/verify_schedule_pipeline.py]
autonomous: true

must_haves:
  truths:
    - "Schedule data is loaded into Registry"
    - "Entities created from templates have Schedule component with correct ID"
    - "Registry can retrieve schedule entries from ID"
  artifacts:
    - path: "tests/verify_schedule_pipeline.py"
      provides: "Automated verification of schedule pipeline"
---

<objective>
Verify that the schedule data pipeline is fully operational, from JSON file to ECS entity component.

Purpose: Ensure the stability and correctness of the new data-driven system.
Output: Verification results and test script.
</objective>

<execution_context>
@/home/peter/.gemini/get-shit-done/workflows/execute-plan.md
@/home/peter/.gemini/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/30-schedule-data-pipeline/30-01-SUMMARY.md
@.planning/phases/30-schedule-data-pipeline/30-02-SUMMARY.md
@entities/schedule_registry.py
@entities/entity_factory.py
@services/resource_loader.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create and Run Verification Script</name>
  <files>tests/verify_schedule_pipeline.py</files>
  <action>
    Create a script `tests/verify_schedule_pipeline.py` that:
    1. Initializes registries.
    2. Loads `schedules.json` and `entities.json`.
    3. Asserts that `ScheduleRegistry` has the expected templates.
    4. Asserts that `EntityRegistry` has templates with `schedule_id`.
    5. Creates an entity using `EntityFactory.create` for a template with a schedule.
    6. Asserts that the created entity has a `Schedule` component with the correct `schedule_id`.
    7. Prints success messages for each step.
  </action>
  <verify>Run `python tests/verify_schedule_pipeline.py` and ensure all assertions pass.</verify>
  <done>Schedule data pipeline is verified and fully functional.</done>
</task>

</tasks>

<verification>
Run the verification script and confirm output.
</verification>

<success_criteria>
1. `tests/verify_schedule_pipeline.py` passes all checks.
2. NPC schedule data is proven to be correctly loaded and associated with entities.
</success_criteria>

<output>
After completion, create `.planning/phases/30-schedule-data-pipeline/30-03-SUMMARY.md`
</output>
