---
phase: 24
plan: 01
wave: 1
depends_on: [23]
files_modified: [config.py, game_states.py, main.py]
autonomous: true
must_haves:
  truths:
    - "Pressing I in GAME state opens a modal inventory screen."
    - "Pressing ESC or I in INVENTORY state returns to GAME state."
    - "The inventory screen lists items currently in the player's Inventory component."
  artifacts:
    - path: "game_states.py"
      provides: "InventoryState"
      min_lines: 50
    - path: "main.py"
      provides: "registration of INVENTORY state"
  key_links:
    - "InventoryState -> GameStates.INVENTORY"
    - "Game -> InventoryState (via state transition)"
---

# Phase 24-01: Inventory Screen and Navigation

**Goal:** Establish the `InventoryState` and basic modal navigation between the main game and the inventory screen.

## Requirements Covered
- **INV-03**: Player can open inventory screen with the I key (modal GameStates.INVENTORY)
- **INV-04**: Inventory screen lists carried items with arrow-key navigation

## Architecture
- **State Management:** Use `GameStates.INVENTORY` to trigger a new `InventoryState` class. This state will receive the player entity and world from the persistent state.
- **UI:** A simple list-based UI that renders item names and highlights the current selection.

<tasks>

<task type="auto">
<files>
<file>config.py</file>
</files>
<action>
Add `INVENTORY = 5` to the `GameStates` enum in `config.py`.
</action>
<verify>
Check if `GameStates.INVENTORY` is accessible.
</verify>
<done>
`GameStates.INVENTORY` is defined.
</done>
</task>

<task type="auto">
<files>
<file>game_states.py</file>
<file>main.py</file>
</files>
<action>
1. Implement `InventoryState(GameState)` in `game_states.py`.
2. It must display a list of item names from `player_entity`'s `Inventory` component.
3. Handle `UP`/`DOWN` keys to move a selection index.
4. Handle `ESC` or `I` to set `self.done = True` and `self.next_state = "GAME"`.
5. Update `Game.handle_player_input` to transition to `INVENTORY` when `K_i` is pressed.
6. Register `"INVENTORY": InventoryState()` in `GameController` within `main.py`.
</action>
<verify>
Run the game, press 'I', verify the inventory screen (empty if no items) appears, and press 'ESC' to return.
</verify>
<done>
`InventoryState` is implemented and integrated into the state machine.
</done>
</task>

</tasks>
