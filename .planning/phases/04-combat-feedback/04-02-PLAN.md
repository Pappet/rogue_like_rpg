---
phase: 04-combat-feedback
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - ecs/components.py
  - entities/monster.py
  - services/map_service.py
  - config.py
autonomous: true
must_haves:
  truths:
    - "Orc monsters appear on the map"
    - "Monsters have Fighter/Stats components (HP, Power, Defense)"
    - "Monsters block movement"
  artifacts:
    - path: "ecs/components.py"
      contains: "class Fighter"
    - path: "entities/monster.py"
      provides: "create_orc function"
  key_links:
    - from: "MapService.create_sample_map"
      to: "create_orc"
      via: "Spawning loop"
---

<objective>
Implement Monster Entities (Orcs) with Stats to populate the dungeon.
Purpose: Provide enemies for the player to interact with.
Output: Orcs spawned in the game world.
</objective>

<context>
@ecs/components.py
@services/map_service.py
@config.py
</context>

<tasks>

<task type="auto">
  <name>Create Fighter Component and Monster Factory</name>
  <files>ecs/components.py, entities/monster.py</files>
  <action>
    1.  Modify `ecs/components.py`: Add `Fighter` component with `max_hp`, `hp`, `power`, `defense`. (Note: `Stats` component might already exist in `ui_system.py` context from Phase 3? Check file. If `Stats` exists, extend or use it).
    2.  Create `entities/monster.py`:
        -   Function `create_orc(world, x, y)`:
            -   Creates entity.
            -   Adds `Position`, `Renderable` (sprite="O", color=Green, layer=ENTITIES), `Blocker`.
            -   Adds `Fighter` (HP=10, Pow=3, Def=0).
            -   Adds `Name("Orc")`.
            -   Adds `AI` (basic placeholder).
  </action>
  <verify>Check `Fighter` component and `create_orc` function.</verify>
  <done>Entity definition ready.</done>
</task>

<task type="auto">
  <name>Spawn Monsters in Map Service</name>
  <files>services/map_service.py</files>
  <action>
    1.  Import `create_orc`.
    2.  In `create_sample_map` (or new `spawn_entities` method):
        -   Iterate through rooms (if rooms exist) or pick random walkable locations.
        -   Spawn 2-3 Orcs for testing.
        -   Ensure they don't spawn on top of player.
  </action>
  <verify>Run game. See "O" sprites on map.</verify>
  <done>Monsters appear in world.</done>
</task>

</tasks>

<verification>
- [ ] Orcs visible on map.
- [ ] Orcs block player movement (due to Blocker component).
</verification>

<success_criteria>
- Orcs exist with stats.
</success_criteria>

<output>
After completion, create `.planning/phases/04-combat-feedback/04-02-SUMMARY.md`
</output>
